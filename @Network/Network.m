% *** Class Network ***

classdef Network < handle
    
    %/////////////////////////////////////////////////////////////////////////////////////
    
    properties
        %---------------------------------------------------------------------------------
        pipe                Pipe
        nodeFixed           NodeFixed
        nodeLeak            NodeLeak
        nodeUnknown         NodeUnknown
        %---------------------------------------------------------------------------------
        nNodeUnknown        double
        nNodeFixed          double
        nNodeLeak           double
        nPipe               double
        %---------------------------------------------------------------------------------
    end
    
    %/////////////////////////////////////////////////////////////////////////////////////
    
    properties %(Hidden)
        %---------------------------------------------------------------------------------
        matrix              Matrix
        %---------------------------------------------------------------------------------
        steadyTolerance     double
        steadyMaxTrial      double
        %---------------------------------------------------------------------------------
        frictionMode        char
        %---------------------------------------------------------------------------------
        dt                  double
        t                   double
        tAdjusted           double
        T                   double
        freq                double
        omega               double
        %---------------------------------------------------------------------------------
        nTimeGrid           double
        nPipeGrid           double
        %---------------------------------------------------------------------------------
    end
    
    %/////////////////////////////////////////////////////////////////////////////////////
    
    properties %(Constant, Hidden)
        %---------------------------------------------------------------------------------
        G                   double = 9.81
        VISCOS              double = 1.007e-6
        %---------------------------------------------------------------------------------
    end
    
    %/////////////////////////////////////////////////////////////////////////////////////
    
    methods
        %---------------------------------------------------------------------------------
        function obj = Network()
            obj.matrix = Matrix();
            obj.pipe = Pipe();
            obj.nodeFixed = NodeFixed();
            obj.nodeLeak = NodeLeak();
            obj.nodeUnknown = NodeUnknown();
        end
        %---------------------------------------------------------------------------------
        function setnNode(obj)
            obj.nNodeFixed = size(obj.matrix.A10, 2);
            obj.nNodeUnknown = size(obj.matrix.A12, 2);
            obj.nNodeLeak = size(obj.matrix.A13, 2);
        end
        %---------------------------------------------------------------------------------
        function setnPipe(obj)
            obj.nPipe = size(obj.matrix.A10, 1);
        end
        %---------------------------------------------------------------------------------
        f = DWCoeff(obj, Q, rough, d)
        %---------------------------------------------------------------------------------
        adjustment(obj)
        %---------------------------------------------------------------------------------
        nonconvergent = steadySolver(obj)
        %---------------------------------------------------------------------------------
        MOCSolver(obj)
        %---------------------------------------------------------------------------------
        FRMSolver(obj, n, adjust)
        %---------------------------------------------------------------------------------
        changeIntoLeak(obj, UnknownNodeID, coeff, pressure)
        %---------------------------------------------------------------------------------
        addOneLeak(obj, pipeID, lFromStart, coeff, pressure, varargin)
        %---------------------------------------------------------------------------------
        addMultiLeaks(obj, pipeID, lFromStart, coeff, pressure)
        %---------------------------------------------------------------------------------
    end
    
    %/////////////////////////////////////////////////////////////////////////////////////
    
    methods (Static)
        
    end
    
    %/////////////////////////////////////////////////////////////////////////////////////
    
end

